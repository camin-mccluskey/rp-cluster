- name: Check Raspberry Pi system status
  hosts: pis
  gather_facts: no
  tasks:
    - name: Get CPU temperature
      shell: vcgencmd measure_temp
      register: temp_result

    - name: Get CPU usage
      shell: top -bn1 | grep "Cpu(s)"
      register: cpu_usage

    - name: Get memory usage
      shell: free -h
      register: mem_usage

    - name: Get disk usage
      shell: df -h /
      register: disk_usage

    - name: Get uptime
      shell: uptime -p
      register: uptime

    - name: Get throttling status
      shell: vcgencmd get_throttled
      register: throttled

    - name: Get firmware version
      shell: vcgencmd version
      register: firmware

    - name: Print nicely formatted status block
      debug:
        msg: |
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€ {{ inventory_hostname }} â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
          ğŸ–¥ï¸  CPU Temp:      {{ temp_result.stdout }}
          ğŸ§® CPU Usage:     {{ cpu_usage.stdout }}
          ğŸ§  Memory Usage:
          {{ mem_usage.stdout | indent(2) }}
          ğŸ’¾ Disk Usage:
          {{ disk_usage.stdout | indent(2) }}
          â±ï¸  Uptime:        {{ uptime.stdout }}
          âš¡ Throttled:      {{ throttled.stdout }}
          ğŸ·ï¸  Firmware:
          {{ firmware.stdout | indent(2) }}
          â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€
